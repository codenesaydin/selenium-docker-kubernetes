EXPORT_MAVEN_HOME = 'M2_HOME="/opt/apache-maven-3.6.3/"'

pipeline {
    agent any

    /*
    parameters
            {
                choice(choices: ['WEB', 'IOS', 'ANDROID', 'INTEGRATION'], description: '', name: 'PROJECT')
                string defaultValue: 'master', description: 'https://jenkins.gtest.sahibindenlocal.net/jenkins/userContent/Tags', name: 'BRANCH', trim: true
            }
     */

    tools
            {
                maven 'Maven 3.6.3'
            }

    options
            {
                ansiColor('xterm')
            }

    stages {

        stage('Environment Info')
                {
                    steps
                            {
                                sh label: 'echo workspace', script: "echo ${WORKSPACE}"
                                sh label: 'export maven', script: EXPORT_MAVEN_HOME
                                sh label: 'java version', script: "java --version"
                                sh label: 'maven version', script: "mvn --version"
                            }
                }
    }

    publishers {
        cleanWs { // Clean after build
            cleanWhenAborted(true)
            cleanWhenFailure(true)
            cleanWhenNotBuilt(false)
            cleanWhenSuccess(true)
            cleanWhenUnstable(true)
            deleteDirs(true)
            notFailBuild(true)
            disableDeferredWipeout(true)
            patterns {
                pattern {
                    type('EXCLUDE')
                    pattern('.propsfile')
                }
                pattern {
                    type('INCLUDE')
                    pattern('.gitignore')
                }
            }
        }
    }
}